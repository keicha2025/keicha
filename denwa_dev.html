---
layout: default
title: æ—¥æœ¬é›»è©±ä»£æ’­æœå‹™é ç´„è¡¨å–®
description: KEICHA æ—¥æœ¬é›»è©±ä»£æ’­æœå‹™ç·šä¸Šé ç´„è¡¨å–®ï¼Œéœ€ä½¿ç”¨ LINE ç™»å…¥ä»¥ç¢ºä¿è¨‚å–®é€šçŸ¥èˆ‡å€‹äººåŒ–æœå‹™ã€‚
keywords: é›»è©±ä»£æ’­, æ—¥æœ¬é ç´„, LINE ç™»å…¥, èªè­‰è¡¨å–®, å®¢æœ, ä»£æ’­æœå‹™
styles: |
    <style>
        /* å“ç‰Œè‰²å®šç¾© */
        :root { --brand-green: #6ea44c; }
        .text-brandGreen { color: var(--brand-green); }
        .bg-brandGreen { background-color: var(--brand-green); }
        .border-brandGreen { border-color: var(--brand-green); }
        .focus\:ring-brandGreen:focus { --tw-ring-color: var(--brand-green); }
        .focus\:border-brandGreen:focus { border-color: var(--brand-green); }

        .form-card { max-width: 800px; }

        /* éš±è—/é¡¯ç¤ºéæ¸¡æ•ˆæœ */
        .collapse-content {
            max-height: 0;
            overflow: hidden;
            /* ç¢ºä¿å®Œå…¨éš±è— */
            transition: max-height 0.3s ease-in-out, padding 0.3s ease, margin 0.3s ease, border-left 0.3s ease; 
            padding: 0; /* é è¨­ padding æ­¸é›¶ */
            margin-bottom: 0; /* é è¨­ margin æ­¸é›¶ */
            border-left: 0px solid transparent; /* é è¨­ border æ­¸é›¶ */
        }
        /* æ‰“é–‹æ™‚ï¼Œå¥—ç”¨ Tailwind çš„ p-4 å’Œ mb-6 æ•ˆæœ */
        .collapse-content.open { 
            max-height: 200px; 
            padding: 1rem; /* Tailwind p-4 */
            margin-bottom: 1.5rem; /* Tailwind mb-6 */
            border-left-width: 4px; /* Tailwind border-l-4 */
            border-color: #ef4444; /* red-500 */
        }
        
        /* å¿…å¡«æ¨™ç±¤ */
        label.required::after {
            content: '*';
            color: #ef4444; 
            margin-left: 0.25rem;
        }

        /* ç¢ºä¿ä¸‹æ‹‰é¸å–®æ¨£å¼ä¸€è‡´ */
        .select-container { position: relative; }
        .select-container select { appearance: none; padding-right: 2.5rem; }
    </style>
scripts: |
    <!-- å¼•å…¥ LINE LIFF SDK -->
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

    <script>
        (function() { // <--- IIFE åŒ…è£¹é–‹å§‹ (ç¢ºä¿è®Šæ•¸ç¯„åœ)
        
            // ğŸš¨ ã€å‰ç«¯é…ç½®å€ã€‘
            const LINE_LIFF_ID = '2008690364-nmk2T4fy'; 
            const BACKEND_API_URL = "https://script.google.com/macros/s/AKfycbz8HU3tMZ1avx4lVc7yr1UXJs3uU4GcpEntOyPPETSRBEQDXsRuotw-LvnyAZljSAd9/exec"; 
            
            let isGuestMode = false; // è¿½è¹¤æ˜¯å¦ç‚ºè¨ªå®¢æ¨¡å¼
            let userAuthData = { 
                uid: null, 
                displayName: 'è¨ªå®¢',
                lineProviderUid: null 
            }; 

            document.addEventListener('DOMContentLoaded', () => {
                window.generateTimeOptions(); // â˜… ä¿®æ­£ï¼šå‘¼å«å…¨å±€å‡½å¼
                window.toggleAccommodationAlert(); // â˜… ä¿®æ­£ï¼šå‘¼å«å…¨å±€å‡½å¼
                
                initializeLiff();
            });
            
            // ---------------------------------------------------
            // æ ¸å¿ƒå‡½å¼å®šç¾©
            // ---------------------------------------------------

            function initializeLiff() {
                if (!LINE_LIFF_ID) {
                    console.error('LIFF ID æœªè¨­å®šï¼Œè«‹è¯ç¹«å®¢æœã€‚');
                    showLoginButton(); 
                    return;
                }

                liff.init({ liffId: LINE_LIFF_ID })
                    .then(() => {
                        if (liff.isLoggedIn()) {
                            getLineProfile();
                        } else {
                            showLoginButton();
                        }
                    })
                    .catch((err) => {
                        console.error('LIFF åˆå§‹åŒ–å¤±æ•—:', err);
                        showLoginButton();
                    });
            }

            function getLineProfile() {
                liff.getProfile()
                    .then(profile => {
                        isGuestMode = false;
                        userAuthData.lineProviderUid = profile.userId;
                        userAuthData.displayName = profile.displayName;
                        userAuthData.uid = profile.userId;
                        
                        showForm();
                    })
                    .catch(err => {
                        console.error('å–å¾—å€‹è³‡å¤±æ•—:', err);
                        alert('ç„¡æ³•å–å¾—æ‚¨çš„ LINE è³‡æ–™ï¼Œè«‹é‡æ–°ç™»å…¥ã€‚');
                    });
            }

            function showLoginButton() {
                const loginArea = document.getElementById('line-login-area');
                const formArea = document.getElementById('form-area');
                const userStatusDisplay = document.getElementById('user-status-display');
                
                formArea.classList.add('hidden');
                loginArea.classList.remove('hidden');
                if(userStatusDisplay) userStatusDisplay.textContent = 'è«‹ç™»å…¥';
            }

            function showForm() {
                const loginArea = document.getElementById('line-login-area');
                const formArea = document.getElementById('form-area');
                const userStatusDisplay = document.getElementById('user-status-display');
                
                loginArea.classList.add('hidden');
                formArea.classList.remove('hidden');
                if(userStatusDisplay) userStatusDisplay.textContent = `æ­¡è¿ï¼Œ${userAuthData.displayName}`;
                
                updateGuestFormRequirements();
                
                if(isGuestMode) {
                     const guestAlert = document.getElementById('guest-mode-alert');
                     if(guestAlert) guestAlert.classList.remove('hidden');
                } else {
                     const guestAlert = document.getElementById('guest-mode-alert');
                     if(guestAlert) guestAlert.classList.add('hidden');
                }
            }
            
            // ---------------------------------------------------
            // è¨ªå®¢æ¨¡å¼é‚è¼¯
            // ---------------------------------------------------
            window.startGuestMode = function() {
                isGuestMode = true;
                userAuthData.lineProviderUid = 'GUEST_' + crypto.randomUUID().replace(/-/g, '_');
                userAuthData.displayName = 'è¨ªå®¢';
                userAuthData.uid = userAuthData.lineProviderUid;
                
                showForm();
            }
            
            // æ ¹æ“šæ¨¡å¼è¨­å®šè¡¨å–®æ¬„ä½è¦æ±‚
            function updateGuestFormRequirements() {
                const emailInput = document.getElementById('guest_email');
                
                // è¨ªå®¢æ¨¡å¼ä¸‹ Email å¿…å¡«ï¼ŒLINE ç™»å…¥æ¨¡å¼ä¸‹ Email éå¿…å¡«
                if (emailInput) {
                    emailInput.required = isGuestMode;
                    emailInput.placeholder = isGuestMode ? "è«‹å‹™å¿…å¡«å¯«ï¼Œå°‡ç™¼é€è¨‚å–®ç¢ºèªä¿¡" : "é¸å¡«ï¼Œå‚™ç”¨è¯çµ¡ä¿¡ç®±";
                    
                    // è®“ Email æ¬„ä½çš„ Label ä¹Ÿé¡¯ç¤ºå¿…å¡«æ˜Ÿè™Ÿ
                    const emailLabel = document.querySelector('label[for="guest_email"]');
                    if (emailLabel) {
                        emailLabel.classList.toggle('required', isGuestMode);
                    }
                }
            }

            // A. å•Ÿå‹• LINE ç™»å…¥æµç¨‹ (ä½¿ç”¨ LIFF)
            window.startLineLogin = function() {
                if (!liff.isLoggedIn()) {
                    liff.login({ redirectUri: window.location.href }); 
                }
            }
            
            // B. ç™»å‡ºåŠŸèƒ½
            window.handleLogout = function() {
                if (liff.isLoggedIn()) {
                    liff.logout();
                }
                userAuthData.lineProviderUid = null;
                isGuestMode = false;
                window.location.reload();
            }

            // ---------------------------------------------------
            // 2. è¡¨å–®è¼”åŠ©å‡½å¼ (ç¾åœ¨æ˜¯å…¨å±€å‡½å¼)
            // ---------------------------------------------------

            window.generateTimeOptions = function() { // â˜… ä¿®æ­£ï¼šæš´éœ²åˆ° window
                const select = document.getElementById('service_time');
                if (!select) return;

                select.innerHTML = '<option value="" disabled selected>è«‹é¸æ“‡æ™‚é–“</option>';

                for (let h = 0; h < 24; h++) {
                    for (let m = 0; m < 60; m += 30) {
                        const hour = h.toString().padStart(2, '0');
                        const minute = m.toString().padStart(2, '0');
                        const time = `${hour}:${minute}`;

                        const option = document.createElement('option');
                        option.value = time;
                        option.textContent = time;
                        select.appendChild(option);
                    }
                }
            }

            // æ¢ä»¶å¼é¡¯ç¤ºé‚è¼¯ (ç¾åœ¨æ˜¯å…¨å±€å‡½å¼)
            window.toggleAccommodationAlert = function() { // â˜… ä¿®æ­£ï¼šæš´éœ²åˆ° window
                const select = document.getElementById('service_item_select');
                const alertDiv = document.getElementById('accommodation_alert');
                let isAccommodationSelected = (select && select.value === 'ä½å®¿é ç´„');

                if (alertDiv) {
                    if (isAccommodationSelected) {
                        alertDiv.classList.add('open');
                        alertDiv.style.maxHeight = alertDiv.scrollHeight + 'px'; 
                    } else {
                        alertDiv.classList.remove('open');
                        alertDiv.style.maxHeight = '0';
                    }
                }
            }

            // ---------------------------------------------------
            // 3. è¡¨å–®æäº¤è™•ç† (ç™¼é€æ•¸æ“šè‡³ GAS)
            // ---------------------------------------------------
            async function handleFormSubmission(event) {
                event.preventDefault();
                const form = event.target;
                const submitBtn = document.getElementById('submit-btn');
                const successMessage = document.getElementById('success-message');
                
                if (!userAuthData.lineProviderUid) {
                     alert("è«‹å…ˆé»æ“Š LINE ç™»å…¥æˆ–è¨ªå®¢å¡«è¡¨æŒ‰éˆ•å®Œæˆèªè­‰ï¼");
                     return;
                }

                const originalBtnHtml = submitBtn.innerHTML;
                submitBtn.disabled = true;
                submitBtn.textContent = 'è¨‚å–®ç™¼é€ä¸­...';

                // 1. æ”¶é›†æ•¸æ“š
                const formData = new FormData(form);
                const data = {};
                formData.forEach((value, key) => { data[key] = value.trim(); });
                
                data.line_user_id = userAuthData.lineProviderUid; 
                data.customer_name = userAuthData.displayName || data.res_en_name || 'è¨ªå®¢'; 
                
                const adults = parseInt(document.getElementById('party_size_adults').value) || 0;
                const children = parseInt(document.getElementById('party_size_children').value) || 0;
                data.party_size_total = `${adults}å¤§äºº, ${children}å°å­©`;


                // 2. ç™¼é€åˆ° GAS
                try {
                    const response = await fetch(BACKEND_API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'text/plain;charset=utf-8' }, 
                        body: JSON.stringify(data)
                    });
                    
                    if (response.ok) { 
                        form.reset();
                        successMessage.classList.remove('hidden');
                        successMessage.scrollIntoView({ behavior: 'smooth' });
                        window.toggleAccommodationAlert(); // ç¢ºä¿é‡ç½®æé†’æ¡†
                        
                        // æ ¹æ“šæ¨¡å¼é¡¯ç¤ºä¸åŒçš„æˆåŠŸæç¤º
                        if (isGuestMode) {
                            document.getElementById('success-mode-line').classList.add('hidden');
                            document.getElementById('success-mode-guest').classList.remove('hidden');
                        } else {
                            document.getElementById('success-mode-line').classList.remove('hidden');
                            document.getElementById('success-mode-guest').classList.add('hidden');
                        }

                    } else {
                        alert('æäº¤å¤±æ•—ï¼Œå¾Œç«¯ä¼ºæœå™¨éŒ¯èª¤ (' + response.status + ')ã€‚è«‹ç›´æ¥è¯ç¹«å®¢æœã€‚');
                    }

                } catch (error) {
                    console.warn('Fetch Error (å·²æˆåŠŸåŸ·è¡Œï¼Œç€è¦½å™¨å ±éŒ¯):', error);
                    
                    form.reset();
                    successMessage.classList.remove('hidden');
                    successMessage.scrollIntoView({ behavior: 'smooth' });
                    
                    if (isGuestMode) {
                        document.getElementById('success-mode-line').classList.add('hidden');
                        document.getElementById('success-mode-guest').classList.remove('hidden');
                    } else {
                        document.getElementById('success-mode-line').classList.remove('hidden');
                        document.getElementById('success-mode-guest').classList.add('hidden');
                    }

                } finally {
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = originalBtnHtml;
                }

                return false;
            }

        })(); // <--- IIFE åŒ…è£¹çµæŸ
    </script>
---
<main class="p-4 md:p-8">
    <div class="form-card mx-auto bg-white rounded-xl shadow-2xl overflow-hidden p-6 md:p-10">
        
        <!-- é ‚éƒ¨ç‹€æ…‹é¡¯ç¤ºå€ -->
        <div class="text-right text-sm text-gray-500 mb-4 border-b pb-2">
             <span id="user-status-display">è«‹ç™»å…¥</span> 
             <!-- ç™»å‡ºæŒ‰éˆ•åŠ ä¸Šæ¡†ç·šæ¨£å¼ -->
             <button onclick="handleLogout()" class="text-xs ml-2 border border-red-500 text-red-500 hover:bg-red-500 hover:text-white px-2 py-0.5 rounded transition">ç™»å‡º</button>
        </div>

        <!-- æ­¥é©Ÿ 1: LINE ç™»å…¥å€ (ç„¡èƒŒæ™¯/é‚Šæ¡†) -->
        <div id="line-login-area" class="text-center p-8">
            <p class="text-xl font-bold text-gray-800 mb-4 flex items-center justify-center">
                <span class="material-symbols-rounded mr-2 text-brandGreen">lock</span> ç™»å…¥å¾Œé ç´„
            </p>
            
            <!-- NEW: ç³»çµ±æç¤ºè¨Šæ¯å€å¡Š (å›ºå®šé¡¯ç¤º) -->
            <div class="p-3 mb-4 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 rounded text-sm text-left">
                è‹¥ç™»å…¥å¾Œè¡¨å–®å…§å®¹æœªç«‹å³è¼‰å…¥ï¼Œè«‹é—œé–‰æ­¤ç¶²é å¾Œå¾ LINE èŠå¤©å®¤é‡æ–°é–‹å•Ÿã€‚
            </div>

            <p class="text-sm text-gray-600 mb-6">ç‚ºç¢ºä¿è¨‚å–®å³æ™‚é€šçŸ¥èˆ‡å¾ŒçºŒå®¢æœèƒ½é †åˆ©å°æ¥ï¼Œè«‹é»æ“Šä¸‹æ–¹æŒ‰éˆ•ç™»å…¥æ‚¨çš„ LINE å¸³è™Ÿã€‚</p>
            
            <!-- ç™»å…¥æŒ‰éˆ•æ”¹ç‚ºç´”æ–‡å­—/å“ç‰Œè‰² -->
            <button type="button" onclick="startLineLogin()" class="bg-brandGreen text-white py-3 px-12 rounded-lg font-bold text-lg shadow-md hover:bg-opacity-90 transition duration-300">
                LINE ç™»å…¥
            </button>
            
            <!-- NEW: è¨ªå®¢å¡«è¡¨é¸é … -->
            <div class="mt-4">
                <button type="button" onclick="startGuestMode()" class="text-gray-500 text-sm hover:text-brandGreen hover:underline transition">
                    æˆ–ä»¥è¨ªå®¢èº«ä»½å¡«å¯«è¡¨å–®
                </button>
            </div>
        </div>


        <!-- æ­¥é©Ÿ 2: è¡¨å–®å€ (ç™»å…¥æˆåŠŸå¾Œæ‰é¡¯ç¤º) -->
        <div id="form-area" class="hidden">
            <div class="text-center mb-10">
                <h1 class="text-3xl md:text-4xl font-bold text-brandGreen mb-3">æ—¥æœ¬é›»è©±ä»£æ’­é ç´„</h1>
                <p class="text-lg text-gray-600">å·²æˆåŠŸç™»å…¥æœƒå“¡ï¼Œæ‚¨çš„è¨‚å–®å°‡æœƒç¶å®šæ‚¨çš„å¸³è™Ÿã€‚</p>
            </div>
            
            <!-- NEW: è¨ªå®¢æ¨¡å¼å°ˆç”¨è­¦ç¤º -->
            <div id="guest-mode-alert" class="hidden p-3 mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 rounded text-sm font-semibold">
                æ‚¨æ­£ä»¥è¨ªå®¢èº«ä»½å¡«å¯«ï¼Œè«‹å‹™å¿…å¡«å¯«é›»å­éƒµä»¶ï¼Œæˆ‘å€‘å°‡ç™¼é€ç¢ºèªä¿¡çµ¦æ‚¨ï¼Œè«‹æ‚¨æˆªåœ–æ”¶åˆ°çš„ä¿¡ä»¶å…§å®¹æä¾›çµ¦å®¢æœï¼Œä»¥å®Œæˆæœ€çµ‚é©—è­‰ã€‚
            </div>

            <form id="denwa-form" onsubmit="handleFormSubmission(event)">
                
                <!-- å€å¡Š: é ç´„æœå‹™æ ¸å¿ƒè³‡è¨Š -->
                <fieldset class="mb-8 p-5 border border-gray-200 rounded-lg bg-gray-50">
                    <legend class="text-xl font-semibold text-gray-800 px-3 -ml-3">é ç´„æœå‹™æ ¸å¿ƒè³‡è¨Š</legend>
                    
                    <!-- æœå‹™é …ç›® (ä¸‹æ‹‰é¸å–®) -->
                    <div class="mb-6 select-container">
                        <label for="service_item_select" class="required block text-sm font-medium text-gray-700 mb-2">æœå‹™é …ç›®</label>
                        <select id="service_item_select" name="service_item" required onchange="window.toggleAccommodationAlert()"
                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border bg-white">
                            <option value="" disabled selected>è«‹é¸æ“‡æœå‹™é …ç›®</option>
                            <option value="é ç´„">é ç´„</option> 
                            <option value="è©¢å•">è©¢å•</option> 
                            <option value="é ç´„æ›´æ”¹">é ç´„æ›´æ”¹/å–æ¶ˆ</option>
                            <option value="ä½å®¿é ç´„">ä½å®¿é ç´„</option>
                            <option value="å…¶ä»–æœå‹™">å…¶ä»–æœå‹™</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500">
                            <span class="material-symbols-rounded">arrow_drop_down</span>
                        </div>
                    </div>

                    <!-- ä½å®¿æœå‹™é¢¨éšªæç¤º (æ¢ä»¶å¼é¡¯ç¤º) -->
                    <div id="accommodation_alert" class="collapse-content bg-red-100 border-red-500 text-red-700 rounded" role="alert">
                        <div class="flex">
                            <span class="material-symbols-rounded mr-3">warning</span>
                            <div>
                                <p class="font-bold">é‡è¦æé†’ï¼šé—œæ–¼ä½å®¿é ç´„</p>
                                <p class="text-sm">å¤§å¤šæ•¸é£¯åº—ä¸æ¥å—ä»£æ’­æœå‹™ä»¥é›»è©±é ç´„ä½å®¿ã€‚è«‹ç¢ºèªæ‚¨çš„éœ€æ±‚æ˜¯å¦ç¬¦åˆä»£æ’­ç¯„åœï¼Œä»¥é¿å…æœå‹™è²»ç”¨çš„ç”¢ç”Ÿã€‚</p>
                            </div>
                        </div>
                    </div>

                    <!-- å•†å®¶åç¨± -->
                    <div class="mb-4">
                        <label for="store_name" class="required block text-sm font-medium text-gray-700 mb-1">å•†å®¶åç¨±</label>
                        <input type="text" id="store_name" name="store_name" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                            placeholder="ä¾‹å¦‚ï¼šæ•˜æ•˜è‹‘æ¾€è°·åº—">
                        <p class="text-xs text-gray-500 mt-1">è‹¥ç‚ºé€£é–åº—ï¼Œè«‹å‹™å¿…è¨»æ˜åˆ†åº—åç¨±ã€‚</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- æœå‹™æ—¥æœŸ -->
                        <div class="mb-4">
                            <label for="service_date" class="required block text-sm font-medium text-gray-700 mb-1">æœå‹™æ—¥æœŸ</label>
                            <input type="date" id="service_date" name="service_date" required
                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border">
                        </div>

                        <!-- æœå‹™æ™‚é–“ -->
                        <div class="mb-4 select-container">
                            <label for="service_time" class="required block text-sm font-medium text-gray-700 mb-1">æœå‹™æ™‚é–“</label>
                            <select id="service_time" name="service_time" required
                                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border bg-white">
                                <!-- JS æœƒè‡ªå‹•ç”Ÿæˆæ™‚é–“é¸é … -->
                            </select>
                             <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500">
                                <span class="material-symbols-rounded">arrow_drop_down</span>
                            </div>
                        </div>

                        <!-- é ç´„äººæ•¸ (å¤§äºº/å°å­©) -->
                        <div class="mb-4">
                            <label class="required block text-sm font-medium text-gray-700 mb-1">é ç´„äººæ•¸</label>
                            <div class="flex space-x-2">
                                <div class="w-1/2">
                                    <input type="number" id="party_size_adults" name="party_size_adults" min="1" max="20" value="1" required
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                                           placeholder="1">
                                    <p class="text-xs text-gray-500 mt-1">å¤§äºº (å¿…å¡«)</p>
                                </div>
                                <div class="w-1/2">
                                    <input type="number" id="party_size_children" name="party_size_children" min="0" max="20" value="0"
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                                           placeholder="0">
                                    <p class="text-xs text-gray-500 mt-1">å°å­© (é¸å¡«)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>

                <!-- å€å¡Š: è¨‚ä½äººèˆ‡è¯çµ¡è³‡è¨Š -->
                <fieldset class="mb-8 p-5 border border-gray-200 rounded-lg">
                    <legend class="text-xl font-semibold text-gray-800 px-3 -ml-3">è¨‚ä½äººèˆ‡è¯çµ¡è³‡è¨Š</legend>
                    
                    <!-- NEW: é›»å­éƒµä»¶ (è¨ªå®¢æ¨¡å¼ä¸‹å¿…å¡«) -->
                    <div class="mb-4">
                        <label for="guest_email" class="block text-sm font-medium text-gray-700 mb-1">é›»å­éƒµä»¶</label>
                        <input type="email" id="guest_email" name="guest_email" 
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                            placeholder="é¸å¡«ï¼Œå‚™ç”¨è¯çµ¡ä¿¡ç®±"> 
                    </div>
                    
                    <!-- è¨‚ä½äººè‹±æ–‡å§“å -->
                    <div class="mb-4">
                        <label for="res_en_name" class="required block text-sm font-medium text-gray-700 mb-1">è¨‚ä½äººè‹±æ–‡å§“å</label> 
                        <input type="text" id="res_en_name" name="res_en_name" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                            placeholder="ä¾‹å¦‚ï¼šWANG DA MING (èˆ‡å…¥ä½/ç”¨é¤è€…ä¸€è‡´)">
                    </div>

                    <!-- è¯çµ¡é›»è©± -->
                    <div class="mb-4">
                        <label for="res_phone" class="required block text-sm font-medium text-gray-700 mb-1">è¯çµ¡é›»è©±</label>
                        <input type="tel" id="res_phone" name="res_phone" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                            placeholder="è«‹è¼¸å…¥é›»è©±è™Ÿç¢¼"> 
                    </div>

                    <!-- åœ¨æ—¥è¯çµ¡è³‡è¨Š -->
                    <div class="mb-4">
                        <label for="hotel_info" class="block text-sm font-medium text-gray-700 mb-1">åœ¨æ—¥è¯çµ¡è³‡è¨Š</label>
                        <textarea id="hotel_info" name="hotel_info" rows="3" 
                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                                placeholder="è«‹å¡«å¯«æ‚¨åœ¨æ—¥æœ¬çš„è¯çµ¡é›»è©±ï¼Œæˆ–é å®šå…¥ä½çš„é£¯åº—åç¨±èˆ‡é›»è©±ã€‚"></textarea>
                        <p class="text-xs text-brandGreen mt-1 font-semibold">é‡è¦æé†’ï¼šéƒ¨åˆ†åº—å®¶åªæ¥å—ç•™æ—¥æœ¬é›»è©±è™Ÿç¢¼ï¼Œæœªå¡«å¯«å¯èƒ½é€ æˆä»£æ’­ç„¡æ³•æˆåŠŸã€‚</p>
                    </div>
                </fieldset>

                <!-- å€å¡Š: è²»ç”¨æ”¯ä»˜é¸æ“‡ -->
                <fieldset class="mb-8 p-5 border border-gray-200 rounded-lg bg-gray-50">
                    <legend class="text-xl font-semibold text-gray-800 px-3 -ml-3">è²»ç”¨æ”¯ä»˜é¸æ“‡</legend>

                    <!-- é ä»˜æ¬¾æ”¯ä»˜æ–¹æ¡ˆ -->
                    <div class="mb-6">
                        <label class="required block text-sm font-medium text-gray-700 mb-2">é ä»˜æ¬¾æ”¯ä»˜æ–¹æ¡ˆ (å¿…é¸)</label>
                        <div class="space-y-3">
                            <label class="block cursor-pointer p-3 border rounded-md hover:bg-white transition bg-white">
                                <input type="radio" name="payment_plan" value="7åˆ†é˜/$160å…ƒè²»ç‡" class="form-radio text-brandGreen focus:ring-brandGreen" required>
                                <span class="ml-2 font-medium text-gray-800">é å…ˆæ”¯ä»˜ 7 åˆ†é˜/$160 å…ƒè²»ç‡ï¼Œæœå‹™å®Œæˆå¾Œå¤šé€€å°‘è£œã€‚</span>
                            </label>
                            <label class="block cursor-pointer p-3 border rounded-md hover:bg-white transition">
                                <input type="radio" name="payment_plan" value="$50å…ƒåŸºç¤é ä»˜æ¬¾" class="form-radio text-brandGreen focus:ring-brandGreen">
                                <span class="ml-2 font-medium text-gray-800">é å…ˆæ”¯ä»˜ 50 å…ƒåŸºç¤é ä»˜æ¬¾ï¼Œæœå‹™å®Œæˆå¾Œå‘æ‚¨æ”¶å–å·®é¡ã€‚</span>
                            </label>
                        </div>
                    </div>
                </fieldset>
                
                <!-- å€å¡Š: å‚™è¨» (ç¨ç«‹å‡ºä¾†) -->
                <fieldset class="mb-8 p-5 border border-gray-200 rounded-lg">
                    <legend class="text-xl font-semibold text-gray-800 px-3 -ml-3">å‚™è¨»</legend>

                    <!-- å…¶ä»–å‚™è¨»èˆ‡è¦æ±‚ -->
                    <div class="mb-4">
                        <textarea id="notes" name="notes" rows="4" 
                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                                placeholder="å‚™ç”¨é ç´„æ™‚æ®µã€å¥—é¤é¸æ“‡ç­‰"></textarea>
                    </div>
                </fieldset>
                
                <!-- æœå‹™æ¢æ¬¾åŒæ„æ ¸å–æ–¹å¡Š -->
                <div class="mb-6">
                    <label class="flex items-center text-sm font-medium text-gray-700">
                        <input type="checkbox" required class="form-checkbox text-brandGreen focus:ring-brandGreen h-4 w-4 rounded">
                        <span class="ml-2">æˆ‘å·²é–±è®€
                            <a href="https://keicha2025.github.io/keicha/denwa.html" target="_blank" class="text-brandGreen hover:underline font-semibold">æœå‹™æ¢æ¬¾</a>
                        </span>
                    </label>
                </div>

                <!-- æäº¤æŒ‰éˆ• -->
                <div class="mt-8">
                    <button type="submit" id="submit-btn" class="w-full bg-brandGreen text-white py-4 rounded-lg font-bold text-lg shadow-md hover:bg-opacity-90 transition duration-300 flex items-center justify-center">
                        <span class="material-symbols-rounded mr-2">send</span> é€å‡ºè³‡è¨Š
                    </button>
                </div>
                
            </form>
            
            <!-- è¡¨å–®æäº¤æˆåŠŸæç¤º (LINE æ¨¡å¼) -->
            <div id="success-message" class="hidden mt-8 p-6 bg-brandGreen/10 border-l-4 border-brandGreen text-gray-700 rounded-lg">
                <div id="success-mode-line">
                    <p class="font-bold text-lg mb-2 flex items-center"><span class="material-symbols-rounded text-brandGreen mr-2">check_circle</span> é ç´„éœ€æ±‚å·²é€å‡ºï¼</p>
                    <p>æ‚¨çš„é›»è©±ä»£æ’­éœ€æ±‚å·²æˆåŠŸè¨˜éŒ„ã€‚æˆ‘å€‘å·²å°‡è©³ç´°è³‡è¨Šæ¨æ’­çµ¦å®¢æœäººå“¡ï¼Œ<br>è«‹æ‚¨<strong>å›åˆ° LINE å®˜æ–¹å¸³è™Ÿ</strong>ï¼Œå®¢æœå°‡æœƒç›¡å¿«èˆ‡æ‚¨è¯ç¹«ç¢ºèªç´°ç¯€èˆ‡è™•ç†é€²åº¦ã€‚</p>
                </div>
                <!-- NEW: è¨ªå®¢æ¨¡å¼æˆåŠŸæç¤º -->
                <div id="success-mode-guest" class="hidden">
                    <p class="font-bold text-lg mb-2 flex items-center"><span class="material-symbols-rounded text-brandGreen mr-2">check_circle</span> è¨ªå®¢è¨‚å–®å·²æ¥æ”¶ï¼</p>
                    <p>æ‚¨çš„è¨‚å–®éœ€æ±‚å·²é€é”å®¢æœã€‚<br>æˆ‘å€‘å·²å°‡è¨‚å–®ç¢ºèªä¿¡ç™¼é€åˆ°æ‚¨çš„é›»å­éƒµä»¶ä¿¡ç®±ï¼Œ**è«‹å‹™å¿…æˆªåœ–æ”¶åˆ°çš„ä¿¡ä»¶å…§å®¹ï¼Œä¸¦æä¾›çµ¦å®¢æœ**ï¼Œä»¥å®Œæˆæœ€çµ‚é©—è­‰ï¼Œè¬è¬ã€‚</p>
                </div>
            </div>
        </div>
    </div>
</main>
