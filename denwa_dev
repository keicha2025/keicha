---
layout: default
title: ğŸ“ æ—¥æœ¬é›»è©±ä»£æ’­æœå‹™é ç´„è¡¨å–® | KEICHA (DEV)
description: KEICHA æ—¥æœ¬é›»è©±ä»£æ’­æœå‹™ç·šä¸Šé ç´„è¡¨å–®ï¼Œéœ€ä½¿ç”¨ LINE ç™»å…¥ä»¥ç¢ºä¿è¨‚å–®é€šçŸ¥èˆ‡å€‹äººåŒ–æœå‹™ã€‚
keywords: é›»è©±ä»£æ’­, æ—¥æœ¬é ç´„, LINE ç™»å…¥, èªè­‰è¡¨å–®, å®¢æœ, ä»£æ’¥æœå‹™
styles: |
    <style>
        /* å“ç‰Œè‰²å®šç¾© */
        :root { --brand-green: #6ea44c; }
        .text-brandGreen { color: var(--brand-green); }
        .bg-brandGreen { background-color: var(--brand-green); }
        .border-brandGreen { border-color: var(--brand-green); }
        .focus\:ring-brandGreen:focus { --tw-ring-color: var(--brand-green); }
        .focus\:border-brandGreen:focus { border-color: var(--brand-green); }

        .form-card { max-width: 800px; }

        /* éš±è—/é¡¯ç¤ºéæ¸¡æ•ˆæœ */
        .collapse-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }
        .collapse-content.open { max-height: 200px; }
        
        /* å¿…å¡«æ¨™ç±¤ */
        label.required::after {
            content: '*';
            color: #ef4444; 
            margin-left: 0.25rem;
        }
    </style>
scripts: |
    <script type="module">
        // ---------------------------------------------------
        // 1. FIREBASE SDK åŒ¯å…¥ (å¼•å…¥ Authentication & Firestore)
        // ---------------------------------------------------
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getAuth, signInWithRedirect, getRedirectResult, onAuthStateChanged, signOut, OAuthProvider } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
        import { getFirestore, collection, doc, setDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

        // ğŸš¨ æ‚¨çš„ Firebase Configuration (å·²å¾æ‚¨æä¾›çš„å€¼å¡«å…¥)
        const firebaseConfig = {
            apiKey: "AIzaSyBF50fJPE-QL3yV4KaVIWzDmDPFRAkpwT4",
            authDomain: "keicha-membership-system.firebaseapp.com",
            projectId: "keicha-membership-system",
            storageBucket: "keicha-membership-system.firebasestorage.app",
            messagingSenderId: "941650156322",
            appId: "1:941650156322:web:5c7473aeaa184e0b94637b",
            measurementId: "G-H3CT3S2LDE"
        };
        
        // ğŸš¨ æ‚¨çš„ GAS API Endpoint (ç”¨æ–¼ LINE æ¨æ’­é€šçŸ¥å®¢æœ)
        const BACKEND_API_URL = "https://script.google.com/macros/s/AKfycbz8HU3tMZ1avx4lVc7yr1UXJs3uU4GcpEntOyPPETSRBEQDXsRuotw-LvnyAZljSAd9/exec"; 

        // ---------------------------------------------------
        // 2. å…¨åŸŸè®Šæ•¸åˆå§‹åŒ–
        // ---------------------------------------------------
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        
        let userAuthData = { 
            uid: null, 
            displayName: 'è¨ªå®¢',
            lineProviderUid: null // å„²å­˜ LINE User ID é—œéµæ¬„ä½
        }; 

        document.addEventListener('DOMContentLoaded', () => {
            generateTimeOptions();
            toggleAccommodationAlert();
            handleLineLoginResult(); // è™•ç†å¾ LINE èªè­‰é é¢è·³è½‰å›ä¾†çš„çµæœ
            initializeAuthListener(); // ç›£è½ç™»å…¥ç‹€æ…‹è®ŠåŒ–
        });

        // ---------------------------------------------------
        // 3. æ ¸å¿ƒ Firebase ç™»å…¥èˆ‡ç‹€æ…‹ç®¡ç†
        // ---------------------------------------------------

        // A. å•Ÿå‹• LINE ç™»å…¥æµç¨‹
        window.startLineLogin = function() {
            const provider = new OAuthProvider('line.me');
            
            // ğŸš¨ ã€é‡è¦ã€‘å¦‚æœæ‚¨çš„ LINE Login å°šæœªåœ¨ Firebase è¨­å®šå®Œæˆï¼Œé€™è£¡å¯èƒ½æœƒå¤±æ•—ã€‚
            // è«‹ç¢ºèª Firebase Auth çš„ LINE Login é é¢å·²è²¼å…¥æ­£ç¢ºçš„ LINE Channel ID/Secretã€‚
            
            // å¼·åˆ¶å¼•å°åŠ å…¥å¥½å‹ (bot_prompt=aggressive) ç¢ºä¿èƒ½æ¨æ’­è¨Šæ¯
            provider.addScope('profile');
            provider.addScope('openid');
            
            signInWithRedirect(auth, provider).catch(error => {
                console.error("LINE ç™»å…¥å•Ÿå‹•å¤±æ•—:", error);
                alert("LINE ç™»å…¥å¤±æ•—ï¼šè«‹ç¢ºèªç¶²è·¯æˆ–è¯ç¹«å®¢æœã€‚");
            });
        }
        
        // B. è™•ç† LINE èªè­‰é é¢è·³è½‰å›ä¾†å¾Œçš„çµæœ
        function handleLineLoginResult() {
             getRedirectResult(auth)
                .then((result) => {
                    if (result) {
                        const credential = OAuthProvider.credentialFromResult(result);
                        
                        // é€™æ˜¯ LINE Login çš„é—œéµï¼Œå¾ Provider æ•¸æ“šä¸­ç²å– LINE User ID
                        const lineProviderId = result.user.providerData.find(p => p.providerId === 'line.me')?.uid;
                        
                        console.log("ç™»å…¥æˆåŠŸï¼Œæ­£åœ¨å¯«å…¥ç”¨æˆ¶è³‡æ–™...", result.user.uid);
                        
                        // å°‡ç”¨æˆ¶è³‡æ–™å¯«å…¥ Firestore
                        setDoc(doc(db, "users", result.user.uid), {
                            uid: result.user.uid,
                            line_user_id: lineProviderId,
                            displayName: result.user.displayName,
                            lastLogin: new Date(),
                            res_en_name: "", // é ç•™æ¬„ä½ï¼Œæ–¹ä¾¿ç®¡ç†å“¡å¡«å¯«
                            res_phone: ""
                        }, { merge: true }); // ä½¿ç”¨ merge: true é¿å…è¦†è“‹ç¾æœ‰è³‡æ–™

                        alert(`æ­¡è¿å›ä¾†ï¼Œ${result.user.displayName || 'æœƒå“¡'}ï¼è¡¨å–®å·²å•Ÿç”¨ã€‚`);
                    }
                })
                .catch((error) => {
                    // è™•ç†ç™»å…¥å¤±æ•—ï¼Œä¾‹å¦‚ç”¨æˆ¶å–æ¶ˆæˆ–ç¶²è·¯éŒ¯èª¤
                    console.error("LINE ç™»å…¥å›å‚³è™•ç†éŒ¯èª¤:", error);
                    alert("ç™»å…¥è™•ç†å¤±æ•—ï¼Œè«‹ç¨å¾Œé‡è©¦ã€‚");
                });
        }
        
        // C. ç›£è½ç™»å…¥ç‹€æ…‹ä¸¦æ§åˆ¶ UI é¡¯ç¤º
        function initializeAuthListener() {
            const loginArea = document.getElementById('line-login-area');
            const formArea = document.getElementById('form-area');
            const userStatusDisplay = document.getElementById('user-status-display');
            
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    // å·²ç™»å…¥
                    userAuthData.uid = user.uid;
                    userAuthData.displayName = user.displayName || 'æœƒå“¡';
                    
                    // å†æ¬¡å¾ Firebase User ç‰©ä»¶ä¸­æå– LINE User ID
                    userAuthData.lineProviderUid = user.providerData.find(p => p.providerId === 'line.me')?.uid;
                    
                    loginArea.classList.add('hidden');
                    formArea.classList.remove('hidden');
                    userStatusDisplay.textContent = `æ­¡è¿ï¼Œ${userAuthData.displayName} (UID: ${user.uid.substring(0, 8)}...)`;

                } else {
                    // æœªç™»å…¥
                    userAuthData.uid = null;
                    userAuthData.lineProviderUid = null;
                    loginArea.classList.remove('hidden');
                    formArea.classList.add('hidden');
                    userStatusDisplay.textContent = 'è«‹ç™»å…¥';
                }
            });
        }
        
        // D. ç™»å‡ºåŠŸèƒ½
        window.handleLogout = function() {
            signOut(auth).then(() => {
                alert("æ‚¨å·²ç™»å‡ºã€‚");
            }).catch((error) => {
                console.error("ç™»å‡ºå¤±æ•—:", error);
            });
        }


        // ---------------------------------------------------
        // 4. è¡¨å–®è¼”åŠ©å‡½å¼
        // ---------------------------------------------------

        // I-4 æœå‹™æ™‚é–“ç”Ÿæˆ (ä¸è®Š)
        function generateTimeOptions() {
            const select = document.getElementById('service_time');
            if (!select) return;

            select.innerHTML = '<option value="" disabled selected>è«‹é¸æ“‡æ™‚é–“</option>';

            for (let h = 0; h < 24; h++) {
                for (let m = 0; m < 60; m += 30) {
                    const hour = h.toString().padStart(2, '0');
                    const minute = m.toString().padStart(2, '0');
                    const time = `${hour}:${minute}`;

                    const option = document.createElement('option');
                    option.value = time;
                    option.textContent = time;
                    select.appendChild(option);
                }
            }
        }

        // I-6 æ¢ä»¶å¼é¡¯ç¤ºé‚è¼¯ (ä¸è®Š)
        function toggleAccommodationAlert() {
            const radioButtons = document.getElementsByName('service_item');
            const alertDiv = document.getElementById('accommodation_alert');
            let isAccommodationSelected = false;

            radioButtons.forEach(radio => {
                if (radio.checked && radio.value === 'ä½å®¿') {
                    isAccommodationSelected = true;
                }
            });

            if (alertDiv) {
                if (isAccommodationSelected) {
                    alertDiv.classList.add('open');
                    alertDiv.style.maxHeight = alertDiv.scrollHeight + 'px';
                } else {
                    alertDiv.classList.remove('open');
                    alertDiv.style.maxHeight = '0';
                }
            }
        }

        // ---------------------------------------------------
        // 5. è¡¨å–®æäº¤è™•ç† (æ–°å¢ Firebase æ•¸æ“š)
        // ---------------------------------------------------
        async function handleFormSubmission(event) {
            event.preventDefault();
            const form = event.target;
            const submitBtn = document.getElementById('submit-btn');
            const successMessage = document.getElementById('success-message');
            
            // é©—è­‰ç™»å…¥
            if (!userAuthData.uid || !userAuthData.lineProviderUid) {
                alert("è«‹å…ˆå®Œæˆ LINE ç™»å…¥èªè­‰ï¼Œæ‰èƒ½æäº¤è¡¨å–®ï¼");
                return;
            }

            const originalBtnHtml = submitBtn.innerHTML;
            submitBtn.disabled = true;
            submitBtn.textContent = 'è¨‚å–®ç™¼é€ä¸­...';

            // 1. æ”¶é›†æ•¸æ“š
            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => { data[key] = value.trim(); });
            
            // â˜… æ ¸å¿ƒæ•¸æ“šï¼šç¶å®šæœƒå“¡ç³»çµ±è³‡è¨Š
            data.firebase_uid = userAuthData.uid;
            data.line_user_id = userAuthData.lineProviderUid; 
            data.customer_name = userAuthData.displayName; 

            // 2. ç™¼é€åˆ° GAS (ç”¨æ–¼ LINE æ¨æ’­é€šçŸ¥å®¢æœ)
            try {
                const response = await fetch(BACKEND_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                
                if (response.ok) {
                    // â˜… 3. å¯«å…¥ Firestore è¨‚å–®æ­·å²ç´€éŒ„ (ç”¨æ–¼æœƒå“¡ç®¡ç†)
                    const orderDocRef = doc(collection(db, "orders"));
                    await setDoc(orderDocRef, {
                        ...data,
                        order_id: orderDocRef.id,
                        status: 'Received',
                        createdAt: new Date()
                    });

                    // 4. UI åé¥‹
                    form.reset();
                    successMessage.classList.remove('hidden');
                    successMessage.scrollIntoView({ behavior: 'smooth' });
                    toggleAccommodationAlert();
                    
                    console.log(`Firestore è¨‚å–®å¯«å…¥æˆåŠŸï¼ID: ${orderDocRef.id}`);

                } else {
                    const errorText = await response.text();
                    alert('æäº¤å¤±æ•—ï¼Œå¾Œç«¯ä¼ºæœå™¨éŒ¯èª¤ (' + response.status + ')ã€‚è«‹ç›´æ¥è¯ç¹«LINEå®¢æœã€‚');
                    console.error('API Error:', response.status, errorText);
                }

            } catch (error) {
                alert('ç³»çµ±éŒ¯èª¤ï¼Œç„¡æ³•å®Œæˆè¨‚å–®æäº¤ã€‚è«‹æª¢æŸ¥ä¸»æ§å°ã€‚');
                console.error('è‡´å‘½éŒ¯èª¤:', error);
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = originalBtnHtml;
            }

            return false;
        }
    </script>
<main class="p-4 md:p-8">
    <div class="form-card mx-auto bg-white rounded-xl shadow-2xl overflow-hidden p-6 md:p-10">
        
        <!-- é ‚éƒ¨ç‹€æ…‹é¡¯ç¤ºå€ -->
        <div class="text-right text-sm text-gray-500 mb-4 border-b pb-2">
             <span id="user-status-display">è«‹ç™»å…¥</span> 
             <button onclick="handleLogout()" class="text-xs text-red-500 hover:underline ml-2">ç™»å‡º</button>
        </div>

        <!-- æ­¥é©Ÿ 1: LINE ç™»å…¥å€ -->
        <div id="line-login-area" class="text-center p-8 border border-brandGreen rounded-lg bg-brandGreen/5">
            <p class="text-xl font-bold text-gray-800 mb-4 flex items-center justify-center">
                <span class="material-symbols-rounded mr-2">lock</span> éœ€ä½¿ç”¨ LINE ç™»å…¥ä»¥é–‹å§‹é ç´„
            </p>
            <p class="text-sm text-gray-600 mb-6">ç‚ºç¢ºä¿è¨‚å–®å³æ™‚é€šçŸ¥èˆ‡å¾ŒçºŒå®¢æœèƒ½é †åˆ©å°æ¥ï¼Œè«‹é»æ“Šä¸‹æ–¹æŒ‰éˆ•ç™»å…¥æ‚¨çš„ LINE å¸³è™Ÿã€‚</p>
            <button type="button" onclick="startLineLogin()" class="bg-[#00B900] text-white py-3 px-8 rounded-lg font-bold text-lg shadow-md hover:bg-opacity-80 transition duration-300">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Line_corporation_logo.svg/100px-Line_corporation_logo.svg.png" class="h-6 w-6 inline-block mr-2 align-middle" alt="LINE Logo">
                LINE å¿«é€Ÿç™»å…¥
            </button>
        </div>


        <!-- æ­¥é©Ÿ 2: è¡¨å–®å€ (ç™»å…¥æˆåŠŸå¾Œæ‰é¡¯ç¤º) -->
        <div id="form-area" class="hidden">
            <div class="text-center mb-10">
                <h1 class="text-3xl md:text-4xl font-bold text-brandGreen mb-3">æ—¥æœ¬é›»è©±ä»£æ’­é ç´„</h1>
                <p class="text-lg text-gray-600">å·²æˆåŠŸç™»å…¥æœƒå“¡ï¼Œæ‚¨çš„è¨‚å–®å°‡æœƒç¶å®šæ‚¨çš„ LINE å¸³è™Ÿã€‚</p>
            </div>

            <form id="denwa-form" onsubmit="handleFormSubmission(event)">
                
                <!-- å€å¡Š I: é ç´„æœå‹™æ ¸å¿ƒè³‡è¨Š -->
                <fieldset class="mb-8 p-5 border border-gray-200 rounded-lg bg-gray-50">
                    <legend class="text-xl font-semibold text-gray-800 px-3 -ml-3">I. é ç´„æœå‹™æ ¸å¿ƒè³‡è¨Š</legend>
                    
                    <div class="mb-6">
                        <label class="required block text-sm font-medium text-gray-700 mb-2">æœå‹™é …ç›®</label>
                        <div class="flex flex-wrap gap-4" onchange="toggleAccommodationAlert()">
                            <label class="inline-flex items-center">
                                <input type="radio" name="service_item" value="é ç´„" class="form-radio text-brandGreen focus:ring-brandGreen" required>
                                <span class="ml-2">é ç´„ï¼ˆé¤å»³/æ´»å‹•ï¼‰</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="service_item" value="è©¢å•" class="form-radio text-brandGreen focus:ring-brandGreen">
                                <span class="ml-2">è©¢å•ï¼ˆç‡Ÿæ¥­æ™‚é–“/åº«å­˜ï¼‰</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="service_item" value="é ç´„æ›´æ”¹" class="form-radio text-brandGreen focus:ring-brandGreen">
                                <span class="ml-2">é ç´„æ›´æ”¹/å–æ¶ˆ</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="service_item" value="ä½å®¿" class="form-radio text-brandGreen focus:ring-brandGreen">
                                <span class="ml-2">ä½å®¿é ç´„</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="service_item" value="å…¶ä»–æœå‹™" class="form-radio text-brandGreen focus:ring-brandGreen">
                                <span class="ml-2">å…¶ä»–æœå‹™</span>
                            </label>
                        </div>
                    </div>

                    <!-- ä½å®¿æœå‹™é¢¨éšªæç¤º -->
                    <div id="accommodation_alert" class="collapse-content bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded" role="alert">
                        <div class="flex">
                            <span class="material-symbols-rounded mr-3">warning</span>
                            <div>
                                <p class="font-bold">é‡è¦æé†’ï¼šä½å®¿æœå‹™é¢¨éšª</p>
                                <p class="text-sm">å¤§å¤šæ•¸é£¯åº—ä¸æ¥å—ä»£æ’­æœå‹™ä»¥é›»è©±é ç´„ä½å®¿ã€‚è«‹ç¢ºèªæ‚¨çš„éœ€æ±‚æ˜¯å¦ç¬¦åˆä»£æ’­ç¯„åœï¼Œä»¥é¿å…æœå‹™è²»ç”¨çš„ç”¢ç”Ÿã€‚</p>
                            </div>
                        </div>
                    </div>

                    <!-- I-2 å•†å®¶åç¨± -->
                    <div class="mb-4">
                        <label for="store_name" class="required block text-sm font-medium text-gray-700 mb-1">å•†å®¶åç¨±</label>
                        <input type="text" id="store_name" name="store_name" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                            placeholder="ä¾‹å¦‚ï¼šå…­å˜èˆ æ±äº¬é§…åº— / X X é£¯åº— - å°åŒ—åº—">
                        <p class="text-xs text-gray-500 mt-1">è‹¥ç‚ºé€£é–åº—ï¼Œè«‹å‹™å¿…è¨»æ˜**åˆ†åº—åç¨±**ã€‚</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- I-3 æœå‹™æ—¥æœŸ -->
                        <div class="mb-4">
                            <label for="service_date" class="required block text-sm font-medium text-gray-700 mb-1">æœå‹™æ—¥æœŸ</label>
                            <input type="date" id="service_date" name="service_date" required
                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border">
                        </div>

                        <!-- I-4 æœå‹™æ™‚é–“ -->
                        <div class="mb-4">
                            <label for="service_time" class="required block text-sm font-medium text-gray-700 mb-1">æœå‹™æ™‚é–“</label>
                            <select id="service_time" name="service_time" required
                                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border bg-white">
                                <!-- JS æœƒè‡ªå‹•ç”Ÿæˆæ™‚é–“é¸é … -->
                            </select>
                        </div>

                        <!-- I-5 é ç´„äººæ•¸ -->
                        <div class="mb-4">
                            <label for="party_size" class="required block text-sm font-medium text-gray-700 mb-1">é ç´„äººæ•¸</label>
                            <input type="number" id="party_size" name="party_size" min="1" max="20" value="1" required
                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                                placeholder="1">
                        </div>
                    </div>
                </fieldset>

                <!-- å€å¡Š II: è¨‚ä½äººèˆ‡è¯çµ¡è³‡è¨Š -->
                <fieldset class="mb-8 p-5 border border-gray-200 rounded-lg">
                    <legend class="text-xl font-semibold text-gray-800 px-3 -ml-3">II. è¨‚ä½äººèˆ‡è¯çµ¡è³‡è¨Š</legend>
                    
                    <!-- II-1 è¨‚ä½äººè‹±æ–‡å§“å -->
                    <div class="mb-4">
                        <label for="res_en_name" class="required block text-sm font-medium text-gray-700 mb-1">è¨‚ä½äººè‹±æ–‡å§“å (è­·ç…§æ ¼å¼)</label>
                        <input type="text" id="res_en_name" name="res_en_name" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                            placeholder="ä¾‹å¦‚ï¼šWANG, DA-MING (èˆ‡å…¥ä½/ç”¨é¤è€…ä¸€è‡´)">
                    </div>

                    <!-- II-2 è¨‚ä½äººè¯çµ¡é›»è©± -->
                    <div class="mb-4">
                        <label for="res_phone" class="required block text-sm font-medium text-gray-700 mb-1">æ‚¨çš„ç·Šæ€¥è¯çµ¡é›»è©±</label>
                        <input type="tel" id="res_phone" name="res_phone" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                            placeholder="ä¾‹å¦‚ï¼š+886912345678 (æ–¹ä¾¿æˆ‘å€‘åœ¨ç·Šæ€¥æ™‚è¯ç¹«æ‚¨)">
                    </div>

                    <!-- II-3 å‚™ç”¨è¯çµ¡è³‡è¨Š (æ—¥æ–¹é›»è©±) -->
                    <div class="mb-4">
                        <label for="hotel_info" class="block text-sm font-medium text-gray-700 mb-1">å‚™ç”¨è¯çµ¡è³‡è¨Š (æ—¥æ–¹é›»è©±/é£¯åº—)</label>
                        <textarea id="hotel_info" name="hotel_info" rows="3" 
                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                                placeholder="è«‹å¡«å¯«æ‚¨åœ¨æ—¥æœ¬çš„è¯çµ¡é›»è©±ï¼Œæˆ–é å®šå…¥ä½çš„é£¯åº—åç¨±èˆ‡é›»è©±ã€‚"></textarea>
                        <p class="text-xs text-brandGreen mt-1 font-semibold">â˜… é‡è¦æé†’ï¼šéƒ¨åˆ†åº—å®¶åªæ¥å—ç•™æ—¥æœ¬é›»è©±è™Ÿç¢¼ï¼Œæœªå¡«å¯«å¯èƒ½é€ æˆä»£æ’­ç„¡æ³•æˆåŠŸã€‚</p>
                    </div>
                </fieldset>

                <!-- å€å¡Š III: è²»ç”¨èˆ‡ç‰¹æ®Šè¦æ±‚ -->
                <fieldset class="mb-8 p-5 border border-gray-200 rounded-lg bg-gray-50">
                    <legend class="text-xl font-semibold text-gray-800 px-3 -ml-3">III. è²»ç”¨èˆ‡ç‰¹æ®Šè¦æ±‚</legend>

                    <!-- III-1 é ä»˜æ¬¾æ”¯ä»˜æ–¹æ¡ˆ -->
                    <div class="mb-6">
                        <label class="required block text-sm font-medium text-gray-700 mb-2">é ä»˜æ¬¾æ”¯ä»˜æ–¹æ¡ˆ (å¿…é¸)</label>
                        <div class="space-y-3">
                            <!-- æ–¹æ¡ˆ A -->
                            <label class="block cursor-pointer p-3 border rounded-md hover:bg-white transition bg-white">
                                <input type="radio" name="payment_plan" value="7åˆ†é˜/$160å…ƒè²»ç‡" class="form-radio text-brandGreen focus:ring-brandGreen" required>
                                <span class="ml-2 font-medium text-gray-800">é å…ˆæ”¯ä»˜ **7 åˆ†é˜/$160 å…ƒ**è²»ç‡ï¼Œæœå‹™å®Œæˆå¾Œå¤šé€€å°‘è£œã€‚</span>
                            </label>
                            <!-- æ–¹æ¡ˆ B -->
                            <label class="block cursor-pointer p-3 border rounded-md hover:bg-white transition">
                                <input type="radio" name="payment_plan" value="$50å…ƒåŸºç¤é ä»˜æ¬¾" class="form-radio text-brandGreen focus:ring-brandGreen">
                                <span class="ml-2 font-medium text-gray-800">é å…ˆæ”¯ä»˜ **50 å…ƒåŸºç¤é ä»˜æ¬¾**ï¼Œæœå‹™å®Œæˆå¾Œå‘æ‚¨æ”¶å–å·®é¡ã€‚</span>
                            </label>
                        </div>
                    </div>

                    <!-- III-2 å…¶ä»–å‚™è¨»èˆ‡è¦æ±‚ -->
                    <div class="mb-4">
                        <label for="notes" class="block text-sm font-medium text-gray-700 mb-1">å…¶ä»–å‚™è¨»èˆ‡è¦æ±‚ (é¸å¡«)</label>
                        <textarea id="notes" name="notes" rows="4" 
                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:ring-brandGreen focus:border-brandGreen border"
                                placeholder="ä¾‹å¦‚ï¼šå‚™ç”¨é ç´„æ™‚æ®µ (18:30)ã€åå¥½å¥—é¤é¸æ“‡ã€ç‰¹æ®Šé£²é£Ÿé™åˆ¶ç­‰ã€‚"></textarea>
                    </div>
                </fieldset>
                
                <!-- æäº¤æŒ‰éˆ• -->
                <div class="mt-8">
                    <button type="submit" id="submit-btn" class="w-full bg-brandGreen text-white py-4 rounded-lg font-bold text-lg shadow-md hover:bg-opacity-90 transition duration-300 flex items-center justify-center">
                        <span class="material-symbols-rounded mr-2">send</span> ç¢ºèªæäº¤ä¸¦ç™¼é€ LINE é€šçŸ¥
                    </button>
                </div>
                
            </form>
            
            <!-- è¡¨å–®æäº¤æˆåŠŸæç¤º -->
            <div id="success-message" class="hidden mt-8 p-6 bg-brandGreen/10 border-l-4 border-brandGreen text-gray-700 rounded-lg">
                <p class="font-bold text-lg mb-2 flex items-center"><span class="material-symbols-rounded text-brandGreen mr-2">check_circle</span> é ç´„éœ€æ±‚å·²é€å‡ºï¼</p>
                <p>æ‚¨çš„é›»è©±ä»£æ’­éœ€æ±‚å·²æˆåŠŸè¨˜éŒ„ã€‚æˆ‘å€‘å·²å°‡è©³ç´°è³‡è¨Šæ¨æ’­çµ¦å®¢æœäººå“¡ï¼Œè«‹æ‚¨**å›åˆ° LINE å®˜æ–¹å¸³è™Ÿ**ï¼Œå®¢æœå°‡æœƒç›¡å¿«èˆ‡æ‚¨è¯ç¹«ç¢ºèªç´°ç¯€èˆ‡è™•ç†é€²åº¦ã€‚</p>
            </div>
        </div>
    </div>
</main>
